<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" id="search">
    <input type="text" id="search1">
    <input type="text" id="search2">
    <input type="text" id="search3">
    <script src="https://cdn.bootcdn.net/ajax/libs/lodash.js/4.17.15/lodash.min.js"></script>
    <script>
        const search = document.getElementById('search');
        let timeout;
        function handlesearch(event) {
            if(timeout) {
                clearTimeout(timeout);
            }
            timeout = setTimeout (() => {
                console.log( event.target.value);
            },1000)
            //用户连续输入就连续触发  还没输入完 没必要请求 => 防抖
            //电梯
        }
        //防抖  setTimeout
        search.addEventListener('input',handlesearch);

        //let timeout1;
        let handlemousemove = function() {
            //if(timeout1) {
               // clearTimeout(timeout1);
            //}
            //timeout1 = setTimeout (() => {
                console.log('handlemousemove'); 
            //},600)
        }
        //有防抖功能
        let hasDebounceedMove = _.debounce(handlemousemove,600);
        window.addEventListener('mousemove', hasDebounceedMove);
        //封装 多个事件防抖
        const search1 = document.getElementById('search1');
        search1.addEventListener('input',debounce( function (e)  {
            console.log(this);
            console.log(e.target.value);
        },600))
        //防抖
        //1.let timeout
        //2. if(timeout)  clear
        //3. timeout = setTime
        //func 没有防抖功能
        function debounce(func, wait) {
            let timeout;
            //具有防抖功能
            return function(event) {
              if(timeout) {
                clearTimeout(timeout);
              }
            timeout = setTimeout (() => {
                func.call(this, event)
            },wait)
          }
        }
    </script>
</body>
</html>